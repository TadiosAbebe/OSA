network:
  ethernets:
    eth0: {}
    eth1: {}
    eth2: {}
    eth3: {}
  bonds:
      bond0: # Management and storage
          interfaces:
          - eth0
          - eth2
          mtu: 9000
          parameters:
            lacp-rate: fast
            mii-monitor-interval: 100
            transmit-hash-policy: layer3+4
            mode: active-backup
            primary: eth0
      bond1: # Provider and tenant
          interfaces:
          - eth1
          - eth3
          mtu: 9000
          parameters:
            lacp-rate: fast
            mii-monitor-interval: 100
            transmit-hash-policy: layer3+4
            mode: active-backup
            primary: eth1
  vlans:
    bond0.10: # Management VLAN
      id: 10
      link: bond0
    bond0.20: # Openstack Storage and CEPH public network VLAN
      id: 20
      link: bond0
    bond1.30: # Tunnel (geneve/vxlan/gre) Network
      id: 30
      link: bond1
  bridges:
    br-mgmt: # Container/Host management bridge
      addresses:
      - 172.29.236.4X/22
      interfaces: 
      - bond0.10
      mtu: 9000
      gateway4: 172.29.236.1
      nameservers:
        addresses:
        - 8.8.8.8
        - 8.8.4.4
    br-storage: # Storage bridge
      addresses:
      - 172.29.244.4X/22
      interfaces:
      - bond0.20
      mtu: 9000
    br-overlay: # Networking (tunnel/overlay) bridge
      addresses:
      - 172.29.240.4X/22
      interfaces:
      - bond1.30
      mtu: 9000
  version: 2
